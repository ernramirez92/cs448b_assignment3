<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3 Test</title>
        <script type="text/javascript" src="d3/d3.v3.js"></script>
    </head>
    <body>
      <label><input type="checkbox"> Monday</label>
        <script type="text/javascript">
          // Set up size
          var width = 750,
          	height = width;

          // Set up projection that map is using
          var projection = d3.geo.mercator()
          	.center([-122.433701, 37.767683]) // San Francisco, roughly
          	.scale(225000)
          	.translate([width / 2, height / 2]);
          // This is the mapping between <longitude, latitude> position to <x, y> pixel position on the map
          // projection([lon, lat]) returns [x, y]

          // Add an svg element to the DOM
          var svg = d3.select("body").append("svg")
          	.attr("width", width)
          	.attr("height", height);

          // Add svg map at correct size, assumes map is saved in a subdirectory called "data"
          svg.append("image")
                    .attr("width", width)
                    .attr("height", height)
                    .attr("xlink:href", "data/sf-map.svg");
          var radius = 1;
          d3.json("data/scpd_incidents.json", function(json) {
            circles = d3.select("svg").selectAll("circle").data(json.data).enter().append("circle");
            console.log(json.data[0].Location[0])
            circles.attr("cx",function(d,i){
                    return projection(d.Location)[0]
                    })
                    .attr("cy",function(d,i){
                            return projection(d.Location)[1]
                            })
                    .attr("r",2).attr("fill", "steelblue");
              d3.select("input").on("change", function(d){
                circles.attr("r",radius+1)
                radius++
              }
            );

          });
        </script>
    </body>
</html>
